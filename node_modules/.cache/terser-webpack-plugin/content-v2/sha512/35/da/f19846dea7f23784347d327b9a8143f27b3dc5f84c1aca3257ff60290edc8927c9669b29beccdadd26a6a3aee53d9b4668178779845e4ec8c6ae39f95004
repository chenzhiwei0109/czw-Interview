{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{962:function(l,s,t){\"use strict\";t.r(s);var e=t(43),v=Object(e.a)({},(function(){var l=this,s=l.$createElement,t=l._self._c||s;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":l.$parent.slotKey}},[t(\"h3\",{attrs:{id:\"背景\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#背景\"}},[l._v(\"#\")]),l._v(\" 背景\")]),l._v(\" \"),t(\"ol\",[t(\"li\",[l._v(\"Node在V8引擎之上构建，其模型与浏览器类似，js将会运行在单个进程的单个线程上；\")])]),l._v(\" \"),t(\"ul\",[t(\"li\",[l._v(\"好处：\"),t(\"strong\",[l._v(\"程序状态是单一的，不存在多线程情况下的锁、线程同步的问题，操作系统在调度时因为较少上下文的切换，可以很好的提高cpu的使用率\")]),l._v(\"；\")]),l._v(\" \"),t(\"li\",[l._v(\"缺点\\n\"),t(\"ul\",[t(\"li\",[l._v(\"如今CPU基本是多核的，一个Node进程只能用一个核 -> \"),t(\"strong\",[l._v(\"如何充分利用多核cpu服务器？\")])]),l._v(\" \"),t(\"li\",[l._v(\"Node执行在单线程上，一旦单线程上抛出的异常没有被捕获，将会引起整个进程的崩溃 -> \"),t(\"strong\",[l._v(\"如何保证进程的健壮性核稳定性？\")])])])])]),l._v(\" \"),t(\"ol\",[t(\"li\",[l._v(\"Node并非真正的单线程架构，其自身还有一定的IO线程存在，这些IO线程由底层libuv处理，对js开发者是透明的，只在c++扩展开发时才会关注到 -> \"),t(\"strong\",[l._v(\"js代码永远运行在V8上，是单线程的\")]),l._v(\"。\\n\"),t(\"em\",[l._v(\"注：\")]),l._v(\"，由于\"),t(\"strong\",[l._v(\"一个CPU核心在 一个时刻只能做一件事情\")]),l._v(\"，操作系统只能通过\"),t(\"strong\",[l._v(\"将CPU切分为时间片\")]),l._v(\"的方法，让线程可以较为均匀地使用CPU资源，但是操作系统内核在切换线程的同时也要切换线程的上下文，当线程数量过多时， 时间将会被耗用在上下文切换中。\")])]),l._v(\" \"),t(\"h3\",{attrs:{id:\"多进程架构\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#多进程架构\"}},[l._v(\"#\")]),l._v(\" 多进程架构\")]),l._v(\" \"),t(\"ol\",[t(\"li\",[t(\"strong\",[l._v(\"child_process模块\")]),l._v(\"：支持Node随意创建子进程的能力；\\n（1）创建异步子进程：返回一个ChildProcess实例，允许父进程注册监听器函数，在子进程生命周期期间，当特定事件发生时会调用这些函数；\")])]),l._v(\" \"),t(\"ul\",[t(\"li\",[l._v(\"spawn(command[, args])：使用给定的command和args中的命令行参数衍生一个新进程；\")]),l._v(\" \"),t(\"li\",[l._v(\"exec(command[, options][, callback(err, stdout, stderr)])：衍生一个shell并在shell中执行命令command，且缓冲任何产生的输出，有一个回调函数获知子进程的状况；\")]),l._v(\" \"),t(\"li\",[l._v(\"execFile(file[, callback])：衍生出一个新进程来执行file(文件名/路径)；\")]),l._v(\" \"),t(\"li\",[l._v(\"fork(modulePath)：衍生新的nodejs进程，每个进程都有自己的内存，使用自己的V8实例；\")])])])}),[],!1,null,null,null);s.default=v.exports}}]);","extractedComments":[]}