(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{706:function(t,s,a){t.exports=a.p+"assets/img/image-20201022095319833.1f205064.png"},707:function(t,s,a){t.exports=a.p+"assets/img/image-20201022103211390.3e74ae45.png"},708:function(t,s,a){t.exports=a.p+"assets/img/image-20201022100113643.ca57b4d0.png"},709:function(t,s,a){t.exports=a.p+"assets/img/image-20201022100449062.4cd21088.png"},710:function(t,s,a){t.exports=a.p+"assets/img/image-20201022100617925.52e355cf.png"},711:function(t,s,a){t.exports=a.p+"assets/img/image-20201022102053948.fbc08522.png"},712:function(t,s,a){t.exports=a.p+"assets/img/image-20201022102708486.e80e6853.png"},713:function(t,s,a){t.exports=a.p+"assets/img/image-20201022102937070.f9a7b0a7.png"},714:function(t,s,a){t.exports=a.p+"assets/img/image-20201022111807379.91363b17.png"},715:function(t,s,a){t.exports=a.p+"assets/img/image-20201022112142846.8395cb1b.png"},716:function(t,s,a){t.exports=a.p+"assets/img/image-20201022112830229.98ee689b.png"},717:function(t,s,a){t.exports=a.p+"assets/img/image-20201022113353199.26ad1881.png"},973:function(t,s,a){"use strict";a.r(s);var e=a(43),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"后端部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端部署"}},[t._v("#")]),t._v(" 后端部署")]),t._v(" "),e("h2",{attrs:{id:"_1-环境配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-环境配置"}},[t._v("#")]),t._v(" 1.环境配置")]),t._v(" "),e("ol",[e("li",[t._v("项目使用轻量应用服务器(已备案)")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(706),alt:"image-20201022095319833"}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("开启安全端口80 443 22(HTTP,HTTPS,SSH) 23480 23481")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(707),alt:"image-20201022103211390"}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("进入宝塔面板,安装环境")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(708),alt:"image-20201022100113643"}})]),t._v(" "),e("h2",{attrs:{id:"_2-后端部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-后端部署"}},[t._v("#")]),t._v(" 2.后端部署")]),t._v(" "),e("ol",[e("li",[t._v("添加域名")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(709),alt:"image-20201022100449062"}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("宝塔面板添加站点")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(710),alt:"image-20201022100617925"}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[e("p",[t._v("文件上传")])]),t._v(" "),e("li",[e("p",[t._v("安装pm2管理器和redis")])]),t._v(" "),e("li",[e("p",[t._v("打开命令行切换根目录")])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(711),alt:"image-20201022102053948"}})]),t._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[t._v("国内服务器切换镜像")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm config set registry https://registry.npm.taobao.org\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[t._v("安装node_modules")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm install --unsafe-perm\n")])])]),e("ol",{attrs:{start:"8"}},[e("li",[t._v("导入sql文件到数据库中")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(712),alt:"image-20201022102708486"}})]),t._v(" "),e("ol",{attrs:{start:"9"}},[e("li",[t._v("修改配置信息：")])]),t._v(" "),e("p",[t._v("config/config.default.js")]),t._v(" "),e("ul",[e("li",[t._v("数据库名称和密码对应宝塔数据库")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(713),alt:"image-20201022102937070"}})]),t._v(" "),e("ul",[e("li",[t._v("部署域名连接")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 部署域名链接")]),t._v("\nconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webUrl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'liveapi.cchenzw.top'")]),t._v("\n")])])]),e("ul",[e("li",[t._v("端口修改")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('"start": "egg-scripts start --daemon --title=egg-server-cilicl-live --sticky --port=7002",\n')])])]),e("ol",{attrs:{start:"10"}},[e("li",[e("p",[t._v("npm start")]),t._v(" "),e("p",[e("img",{attrs:{src:a(714),alt:"image-20201022111807379"}})])]),t._v(" "),e("li",[e("p",[t._v("反向代理")]),t._v(" "),e("p",[t._v("项目端口并不是80端口而是7001端口，我们要把他代理到80端口。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(715),alt:"image-20201022112142846"}})])]),t._v(" "),e("li",[e("p",[t._v("修改首页ajax获取的域名")]),t._v(" "),e("p",[e("img",{attrs:{src:a(716),alt:"image-20201022112830229"}})])]),t._v(" "),e("li",[e("p",[t._v("宝塔放行")]),t._v(" "),e("p",[e("img",{attrs:{src:a(717),alt:"image-20201022113353199"}})])])]),t._v(" "),e("h2",{attrs:{id:"_3-结束进程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-结束进程"}},[t._v("#")]),t._v(" 3.结束进程")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("netstat -tlnp|grep 7005\n\nkill xxxxx\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);