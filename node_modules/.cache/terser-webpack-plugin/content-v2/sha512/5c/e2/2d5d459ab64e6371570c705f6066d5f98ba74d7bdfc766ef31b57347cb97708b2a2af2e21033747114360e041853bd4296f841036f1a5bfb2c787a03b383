{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{507:function(t,s,a){t.exports=a.p+\"assets/img/1726554-b290c1927997d615.a5452f77.gif\"},870:function(t,s,a){\"use strict\";a.r(s);var n=a(43),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[n(\"h1\",{attrs:{id:\"node爬虫\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#node爬虫\"}},[t._v(\"#\")]),t._v(\" node爬虫\")]),t._v(\" \"),n(\"h2\",{attrs:{id:\"cherrio\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cherrio\"}},[t._v(\"#\")]),t._v(\" cherrio\")]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"cheerio是jquery核心功能的一个快速灵活而又简洁的实现，主要是为了用在服务器端需要对DOM进行操作的地方\")])]),t._v(\" \"),n(\"p\",[t._v(\"cheerio是nodejs的抓取页面模块，为服务器特别定制的，快速、灵活、实施的jQuery核心实现。适合各种Web爬虫程序。\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" cheerio \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'cheerio'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    $ \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" cheerio\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"load\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<h2 class = \\\"title\\\">Hello world</h2>'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n​\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'h2.title'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"text\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Hello there!'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'h2'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"addClass\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'welcome'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n​\\n$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"html\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('//=> <h2 class = \"title welcome\">Hello there!</h2>')]),t._v(\"\\n\")])])]),n(\"h3\",{attrs:{id:\"安装\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装\"}},[t._v(\"#\")]),t._v(\" 安装\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"npm install cheerio\\n\")])])]),n(\"h3\",{attrs:{id:\"特点\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#特点\"}},[t._v(\"#\")]),t._v(\" 特点\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[n(\"strong\",[t._v(\"熟悉的语法\")]),t._v(\"：cheerio实现了jQuery的一个子集，去掉了jQuery中所有与DOM不一致或者是用来填浏览器的坑的东西，重现了jQuery最美妙的API\")]),t._v(\" \"),n(\"li\",[n(\"strong\",[t._v(\"快到没朋友\")]),t._v(\"：cheerio使用了及其简洁而又标准的DOM模型， 因此对文档的转换，操作，渲染都极其的高效。基本的端到端测试显示它的速度至少是JSDOM的8倍\")]),t._v(\" \"),n(\"li\",[n(\"strong\",[t._v(\"极其灵活\")]),t._v(\"：cheerio使用了\"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=https://github.com/FB55\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"@FB55\"),n(\"OutboundLink\")],1),t._v(\"编写的非常兼容的\"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=https://github.com/fb55/htmlparser2\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"htmlparser2\"),n(\"OutboundLink\")],1),t._v(\"，因此它可以解析几乎所有的HTML和XML\")])]),t._v(\" \"),n(\"h3\",{attrs:{id:\"关于jsdom\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#关于jsdom\"}},[t._v(\"#\")]),t._v(\" 关于JSDOM\")]),t._v(\" \"),n(\"p\",[t._v(\"cheerio产生的原因是出于对JSDOM的失望，主要体现在以下三点：\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"*\"),n(\"strong\",[t._v(\"JSDOM的解析规则太过于严格*\")]),t._v(\"：JSDOM的解析器无法处理现在许多的流行网站的内容\")]),t._v(\" \"),n(\"li\",[t._v(\"*\"),n(\"strong\",[t._v(\"JSDOM太慢了*\")]),t._v(\"：解析大的网站甚至可以产生可察觉的延迟\")]),t._v(\" \"),n(\"li\",[t._v(\"*\"),n(\"strong\",[t._v(\"JSDOM太过于重量级*\")]),t._v(\"：JSDOM的目标是提供与浏览器一样的DOM环境，但是我们往往不需要这样。我们需要的只是一种简单，熟悉的方式来操作我们的HTML\")])]),t._v(\" \"),n(\"h3\",{attrs:{id:\"什么时候你应该用jsdom\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#什么时候你应该用jsdom\"}},[t._v(\"#\")]),t._v(\" 什么时候你应该用JSDOM\")]),t._v(\" \"),n(\"p\",[t._v(\"cheerio并非万能，当你需要一个浏览器一样的环境时，你最好还是用JSDOM，尤其是你需要进行自动化的功能测试时\")]),t._v(\" \"),n(\"h3\",{attrs:{id:\"api\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#api\"}},[t._v(\"#\")]),t._v(\" API\")]),t._v(\" \"),n(\"p\",[t._v(\"后面的例子中用到的HTML模板如下：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-html extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"ul\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"id\")]),n(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"fruits\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"li\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"class\")]),n(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"apple\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"Apple\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"li\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"li\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"class\")]),n(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"orange\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"Orange\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"li\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"li\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"class\")]),n(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"pear\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"Pear\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"li\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"ul\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])])]),n(\"h4\",{attrs:{id:\"_1-解析html（load）\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-解析html（load）\"}},[t._v(\"#\")]),t._v(\" 1. 解析html（load）\")]),t._v(\" \"),n(\"p\",[t._v(\"首先你需要先加载你的HTML。jQuery会自动完成这一步，因为jQuery操作的DOM是固定的。但是在使用cheerio时我们要手动加载我们的HTML文档\")]),t._v(\" \"),n(\"p\",[t._v(\"首选的方式如下：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" cheerio \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'cheerio'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n$ \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" cheerio\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"load\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<ul id = \\\"fruits\\\">...</ul>'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"其次，直接把HTML字符串作为上下文也是可以的：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[t._v(\"$ \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'cheerio'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'ul'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<ul id = \\\"fruits\\\">...</ul>'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"或者把HTML字符串作为root\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[t._v(\"$ \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'cheerio'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'li'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'ul'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<ul id = \\\"fruits\\\">...</ul>'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"如果你需要自定义一些解析选项，你可以多传递一个对象给load方法：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[t._v(\"$ \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" cheerio\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"load\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<ul id = \\\"fruits\\\">...</ul>'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    ignoreWhitespace\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    xmlMode\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"更多的解析选项可以参考\"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=https://github.com/fb55/domhandler\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"domhandler\"),n(\"OutboundLink\")],1),t._v(\"和\"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=https://github.com/fb55/htmlparser2/wiki/Parser-options\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"parser-options\"),n(\"OutboundLink\")],1)]),t._v(\" \"),n(\"h4\",{attrs:{id:\"_2-选择器（selectors）\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-选择器（selectors）\"}},[t._v(\"#\")]),t._v(\" 2. 选择器（selectors）\")]),t._v(\" \"),n(\"p\",[t._v(\"cheerio的选择器几乎和jQuery一模一样，所以语法上十分相像\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$( selector, [context], [root] )\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\"selector\")]),t._v(\"在\"),n(\"strong\",[t._v(\"context\")]),t._v(\"的范围内搜索，\"),n(\"strong\",[t._v(\"context\")]),t._v(\"的范围又包含在\"),n(\"strong\",[t._v(\"root\")]),t._v(\"的范围内。\"),n(\"strong\",[t._v(\"selector\")]),t._v(\"和\"),n(\"strong\",[t._v(\"context\")]),t._v(\"可以是一个字符串，DOM元素，DOM数组或者cheerio实例。\"),n(\"strong\",[t._v(\"root\")]),t._v(\"一般是一个HTML文档字符串\")]),t._v(\" \"),n(\"p\",[t._v(\"选择器是文档遍历和操作的起点。如同在jQuery中一样，它是选择元素节点最重要的方法，但是在jQuery中选择器建立在CSS选择器标准库上。cheerio的选择器实现了大部分的方法\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.apple', '#fruits').text()\\n//=> Apple\\n\\n$('ul .pear').attr('class')\\n//=> pear\\n\\n$('li[class=orange]').html()\\n//=> <li class = \\\"orange\\\">Orange</li>\\n\")])])]),n(\"h4\",{attrs:{id:\"_3-属性操作（atrributes）\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-属性操作（atrributes）\"}},[t._v(\"#\")]),t._v(\" 3. 属性操作（atrributes）\")]),t._v(\" \"),n(\"p\",[t._v(\"用来获取和更改属性的方法：\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".attr(name, value)\")])]),t._v(\" \"),n(\"p\",[t._v(\"这个方法用来获取和设置属性。获取第一个符合匹配的元素的属性值。如果某个属性值被设置成null，那么该属性会被移除。你也可以把\"),n(\"strong\",[t._v(\"map\")]),t._v(\"和\"),n(\"strong\",[t._v(\"function\")]),t._v(\"作为参数传递进去，就像在jQuery中一样\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'ul'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"attr\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'id'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//=> fruits\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'.apple'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"attr\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'id'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'favorite'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"html\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('//=> <li class = \"apple\" id = \"favorite\">Apple</li>')]),t._v(\"\\n\")])])]),n(\"blockquote\",[n(\"p\",[t._v(\"更多信息请查看 \"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=http://api.jquery.com/attr/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"http://api.jquery.com/attr/\"),n(\"OutboundLink\")],1)])]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".removeAtrr(name)\")])]),t._v(\" \"),n(\"p\",[t._v(\"移除名为name的属性\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.pear').removeAttr('class').html()\\n//=> <li>Pear</li>\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".hasClass(className)\")])]),t._v(\" \"),n(\"p\",[t._v(\"检查元素是否含有此类名\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'.pear'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"hasClass\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'pear'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//=> true\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'apple'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"hasClass\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'fruit'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//=> false\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'li'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"hasClass\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'pear'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//=> true\")]),t._v(\"\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".addClass(className)\")])]),t._v(\" \"),n(\"p\",[t._v(\"添加类名到所有的匹配元素，可以用函数作为参数\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.pear').addClass('fruit').html()\\n//=> <li class = \\\"pear fruit\\\">Pear</li>\\n\\n$('.apple').addClass('fruit red').html()\\n//=> <li class = \\\"apple fruit red\\\">Apple</li>\\n\")])])]),n(\"blockquote\",[n(\"p\",[t._v(\"参见 \"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=http://api.jquery.com/addClass/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"http://api.jquery.com/addClass/\"),n(\"OutboundLink\")],1)])]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".remoteClass([className])\")])]),t._v(\" \"),n(\"p\",[t._v(\"移除一个或者多个（空格分隔）的类名，如果className为空，则所有的类名都会被移除，可以传递函数作为参数\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.pear').removeClass('pear').html()\\n//=> <li class = \\\"\\\">Pear</li>\\n\\n$('.apple').addClass('red').removeClass().html()\\n//=> <li class = \\\"\\\">Apple</li>\\n\")])])]),n(\"blockquote\",[n(\"p\",[t._v(\"参见 \"),n(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=http://api.jquery.com/removeClass/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"http://api.jquery.com/removeClass/\"),n(\"OutboundLink\")],1)])]),t._v(\" \"),n(\"h4\",{attrs:{id:\"遍历\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#遍历\"}},[t._v(\"#\")]),t._v(\" 遍历\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".find(selector)\")])]),t._v(\" \"),n(\"p\",[t._v(\"在当前元素集合中选择符合选择器规则的元素集合\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('#fruits').find('li').length\\n//=> 3\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".parent()\")])]),t._v(\" \"),n(\"p\",[t._v(\"获取元素集合第一个元素的父元素\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.pear').parent().attr('id')\\n//=> fruits\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".next()\")])]),t._v(\" \"),n(\"p\",[t._v(\"选择当前元素的下一个兄弟元素\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.apple').next().hasClass('orange')\\n//=> true\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".prev()\")])]),t._v(\" \"),n(\"p\",[t._v(\"同**.next()**相反\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".siblings()\")])]),t._v(\" \"),n(\"p\",[t._v(\"获取元素集合中第一个元素的所有兄弟元素，不包含它自己\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.pear').siblings().length\\n//=> 2\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".children( selector )\")])]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".each( function(index, element) )\")])]),t._v(\" \"),n(\"p\",[t._v(\"遍历函数返回false即可终止遍历\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" fruits \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'li'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"each\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"i\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" elem\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  fruits\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"i\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"$\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"this\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"text\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\nfruits\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"join\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"', '\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//=> Apple, Orange, Pear\")]),t._v(\"\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".map( function(index, element) )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('li').map(function(i, el) {\\n  // this === el\\n  return $(this).attr('class');\\n}).get().join(', ');\\n//=> apple, orange, pear\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".filter( selector )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('li').filter('.orange').attr('class');\\n//=> orange\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".filter( function(index) )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('li').filter(function(i, el) {\\n  // this === el\\n  return $(this).attr('class') === 'orange';\\n}).attr('class')\\n//=> orange\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".first()\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('#fruits').children().first().text()\\n//=> Apple\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".last()\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('#fruits').children().last().text()\\n//=> Pear\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".eq( i )\")])]),t._v(\" \"),n(\"p\",[t._v(\"缩小元素集合，可以用负数表示倒数第 i 个元素被保留\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('li').eq(0).text()\\n//=> Apple\\n\\n$('li').eq(-1).text()\\n//=> Pear\\n\")])])]),n(\"h4\",{attrs:{id:\"操作dom\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#操作dom\"}},[t._v(\"#\")]),t._v(\" 操作DOM\")]),t._v(\" \"),n(\"p\",[t._v(\"操作DOM结构的方法\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".append( content, [content, ...] )\")])]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".prepend( content, [content, ...] )\")])]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".after( content, [content, ...] )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('$(\\'.apple\\').after(\\'<li class = \"plum\">Plum</li>\\')\\n$.html()\\n//=>  <ul id = \"fruits\">\\n//      <li class = \"apple\">Apple</li>\\n//      <li class = \"plum\">Plum</li>\\n//      <li class = \"orange\">Orange</li>\\n//      <li class = \"pear\">Pear</li>\\n//    </ul>\\n')])])]),n(\"p\",[n(\"strong\",[t._v(\".before( content, [content, ...] )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('$(\\'.apple\\').before(\\'<li class = \"plum\">Plum</li>\\')\\n$.html()\\n//=>  <ul id = \"fruits\">\\n//      <li class = \"plum\">Plum</li>\\n//      <li class = \"apple\">Apple</li>\\n//      <li class = \"orange\">Orange</li>\\n//      <li class = \"pear\">Pear</li>\\n//    </ul>\\n')])])]),n(\"p\",[n(\"strong\",[t._v(\".remove( [selector] )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('$(\\'.pear\\').remove()\\n$.html()\\n//=>  <ul id = \"fruits\">\\n//      <li class = \"apple\">Apple</li>\\n//      <li class = \"orange\">Orange</li>\\n//    </ul>\\n')])])]),n(\"p\",[n(\"strong\",[t._v(\".replaceWith( content )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('var plum = $(\\'<li class = \"plum\">Plum</li>\\')\\n$(\\'.pear\\').replaceWith(plum)\\n$.html()\\n//=> <ul id = \"fruits\">\\n//     <li class = \"apple\">Apple</li>\\n//     <li class = \"orange\">Orange</li>\\n//     <li class = \"plum\">Plum</li>\\n//   </ul>\\n')])])]),n(\"p\",[n(\"strong\",[t._v(\".empty()\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('ul').empty()\\n$.html()\\n//=>  <ul id = \\\"fruits\\\"></ul>\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".html( [htmlString] )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.orange').html()\\n//=> Orange\\n\\n$('#fruits').html('<li class = \\\"mango\\\">Mango</li>').html()\\n//=> <li class=\\\"mango\\\">Mango</li>\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".text( [textString] )\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('.orange').text()\\n//=> Orange\\n\\n$('ul').text()\\n//=>  Apple\\n//    Orange\\n//    Pear\\n\")])])]),n(\"h4\",{attrs:{id:\"解析和渲染\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#解析和渲染\"}},[t._v(\"#\")]),t._v(\" 解析和渲染\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('$.html()\\n//=>  <ul id = \"fruits\">\\n//      <li class = \"apple\">Apple</li>\\n//      <li class = \"orange\">Orange</li>\\n//      <li class = \"pear\">Pear</li>\\n//    </ul>\\n')])])]),n(\"p\",[t._v(\"输出包含自己在内的HTML（outer HTML）\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$.html('.pear')\\n//=> <li class = \\\"pear\\\">Pear</li>\\n\")])])]),n(\"h4\",{attrs:{id:\"杂项\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#杂项\"}},[t._v(\"#\")]),t._v(\" 杂项\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\".toArray()\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"$('li').toArray()\\n//=> [ {...}, {...}, {...} ]\\n\")])])]),n(\"p\",[n(\"strong\",[t._v(\".clone()\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"var moreFruit = $('#fruits').clone()\\n\")])])]),n(\"h4\",{attrs:{id:\"常用工具\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#常用工具\"}},[t._v(\"#\")]),t._v(\" 常用工具\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\"$.root()\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('$.root().append(\\'<ul id=\"vegetables\"></ul>\\').html();\\n//=> <ul id=\"fruits\">...</ul><ul id=\"vegetables\"></ul>\\n')])])]),n(\"p\",[n(\"strong\",[t._v(\"$.contains( container, contained )\")])]),t._v(\" \"),n(\"h2\",{attrs:{id:\"反爬虫策略\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#反爬虫策略\"}},[t._v(\"#\")]),t._v(\" 反爬虫策略\")]),t._v(\" \"),n(\"p\",[t._v(\"利用代理反爬虫。\")]),t._v(\" \"),n(\"h2\",{attrs:{id:\"爬取音乐\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#爬取音乐\"}},[t._v(\"#\")]),t._v(\" 爬取音乐\")]),t._v(\" \"),n(\"h2\",{attrs:{id:\"puppeteer\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#puppeteer\"}},[t._v(\"#\")]),t._v(\" puppeteer\")]),t._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"https://zhaoqize.github.io/puppeteer-api-zh_CN/#/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"中文文档\"),n(\"OutboundLink\")],1)]),t._v(\" \"),n(\"p\",[t._v(\"Chrome59(linux、macos)、 Chrome60(windows)之后，Chrome自带\"),n(\"a\",{attrs:{href:\"https://developers.google.com/web/updates/2017/04/headless-chrome\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"headless(无界面)模式\"),n(\"OutboundLink\")],1),t._v(\"很方便做自动化测试或者爬虫。但是如何和headless模式的Chrome交互则是一个问题。通过启动Chrome时的命令行参数仅能实现简易的启动时初始化操作。Selenium、Webdriver等是一种解决方案，但是往往依赖众多，不够扁平。\")]),t._v(\" \"),n(\"p\",[t._v(\"Puppeteer是谷歌官方出品的一个通过DevTools协议控制headless Chrome的Node库。可以通过Puppeteer的提供的api直接控制Chrome模拟大部分用户操作来进行UI Test或者作为爬虫访问页面来收集数据。\")]),t._v(\" \"),n(\"h3\",{attrs:{id:\"作用：\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#作用：\"}},[t._v(\"#\")]),t._v(\" 作用：\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"生成页面 PDF。\")]),t._v(\" \"),n(\"li\",[t._v(\"抓取 SPA（单页应用）并生成预渲染内容(前端渲染不是服务端渲染)。\")]),t._v(\" \"),n(\"li\",[t._v(\"自动提交表单，进行 UI 测试，键盘输入等。\")]),t._v(\" \"),n(\"li\",[t._v(\"创建一个时时更新的自动化测试环境。 使用最新的 JavaScript 和浏览器功能直接在最新版本的Chrome中执行测试。\")]),t._v(\" \"),n(\"li\",[t._v(\"捕获网站的 \"),n(\"a\",{attrs:{href:\"https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"timeline trace\"),n(\"OutboundLink\")],1),t._v(\"，用来帮助分析性能问题。\")]),t._v(\" \"),n(\"li\",[t._v(\"测试浏览器扩展。\")])]),t._v(\" \"),n(\"h4\",{attrs:{id:\"环境和安装\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#环境和安装\"}},[t._v(\"#\")]),t._v(\" 环境和安装\")]),t._v(\" \"),n(\"p\",[t._v(\"Puppeteer本身依赖6.4以上的Node，但是为了异步超级好用的\"),n(\"a\",{attrs:{href:\"http://es6.ruanyifeng.com/#docs/async\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"async/await\"),n(\"OutboundLink\")],1),t._v(\"，推荐使用7.6版本以上的Node。另外headless Chrome本身对服务器依赖的库的版本要求比较高，centos服务器依赖偏稳定，v6很难使用headless Chrome，提升依赖版本可能出现各种服务器问题（包括且不限于无法使用ssh），最好使用高版本服务器。\")]),t._v(\" \"),n(\"p\",[t._v(\"Puppeteer因为是一个npm的包，所以安装很简单：\")]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"npm i puppeteer\")])]),t._v(\" \"),n(\"p\",[t._v(\"或者\")]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"yarn add puppeteer\")])]),t._v(\" \"),n(\"p\",[t._v(\"Puppeteer安装时自带一个最新版本的Chromium，可以通过设置环境变量或者npm config中的PUPPETEER_SKIP_CHROMIUM_DOWNLOAD跳过下载。如果不下载的话，启动时可以通过puppeteer.launch([options])配置项中的executablePath指定Chromium的位置。\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"使用和例子\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#使用和例子\"}},[t._v(\"#\")]),t._v(\" 使用和例子\")]),t._v(\" \"),n(\"p\",[t._v(\"Puppeteer类似其他框架，通过操作Browser实例来操作浏览器作出相应的反应。\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" puppeteer \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'puppeteer'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"async\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" browser \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" puppeteer\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"launch\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" page \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" browser\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"newPage\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"goto\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'http://rennaiqian.com'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"screenshot\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"path\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'example.png'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"pdf\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"path\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'example.pdf'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" format\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'A4'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" browser\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"close\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"上述代码通过puppeteer的launch方法生成了一个browser的实例，对应于浏览器，launch方法可以传入配置项，比较有用的是在本地调试时传入{headless:false}可以关闭headless模式。\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"const browser = await puppeteer.launch({headless:false})\\n\")])])]),n(\"p\",[t._v(\"browser.newPage方法可以打开一个新选项卡并返回选项卡的实例page，通过page上的各种方法可以对页面进行常用操作。上述代码就进行了截屏和打印pdf的操作。\")]),t._v(\" \"),n(\"p\",[t._v(\"一个很强大的方法是page.evaluate(pageFunction, ...args)，可以向页面注入我们的函数，这样就有了无限可能\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" puppeteer \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'puppeteer'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"async\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" browser \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" puppeteer\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"launch\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" page \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" browser\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"newPage\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"goto\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'http://rennaiqian.com'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('// Get the \"viewport\" of the page, as reported by the page.')]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" dimensions \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"evaluate\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      width\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" document\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"documentElement\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"clientWidth\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n      height\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" document\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"documentElement\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"clientHeight\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n      deviceScaleFactor\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" window\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"devicePixelRatio\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n  console\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"log\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Dimensions:'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" dimensions\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" browser\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"close\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"需要注意的是evaluate方法中是无法直接使用外部的变量的，需要作为参数传入，想要获得执行的结果也需要return出来。因为是一个开源一个多月的项目，现在项目很活跃，所以使用时自行查找\"),n(\"a\",{attrs:{href:\"https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"api\"),n(\"OutboundLink\")],1),t._v(\"才能保证参数、使用方法不会错。\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"调试技巧\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#调试技巧\"}},[t._v(\"#\")]),t._v(\" 调试技巧\")]),t._v(\" \"),n(\"ol\",[n(\"li\",[t._v(\"关掉无界面模式，有时查看浏览器显示的内容是很有用的。使用以下命令可以启动完整版浏览器：\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"const browser = await puppeteer.launch({headless: false})\\n\")])])]),n(\"ol\",[n(\"li\",[t._v(\"减慢速度，slowMo选项以指定的毫秒减慢Puppeteer的操作。这是另一个看到发生了什么的方法：\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"const browser = await puppeteer.launch({\\n  headless:false,\\n  slowMo:250\\n});\\n\")])])]),n(\"p\",[t._v(\"3.捕获console的输出,通过监听console事件。在page.evaluate里调试代码时这也很方便：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"page.on('console', msg => console.log('PAGE LOG:', ...msg.args));\\nawait page.evaluate(() => console.log(`url is ${location.href}`));\\n\")])])]),n(\"p\",[t._v(\"4.启动详细日志记录，所有公共API调用和内部协议流量都将通过puppeteer命名空间下的debug模块进行记录\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(' # Basic verbose logging\\n env DEBUG=\"puppeteer:*\" node script.js\\n # Debug output can be enabled/disabled by namespace\\n env DEBUG=\"puppeteer:*,-puppeteer:protocol\" node script.js # everything BUT protocol messages\\n env DEBUG=\"puppeteer:session\" node script.js # protocol session messages (protocol messages to targets)\\n env DEBUG=\"puppeteer:mouse,puppeteer:keyboard\" node script.js # only Mouse and Keyboard API calls\\n # Protocol traffic can be rather noisy. This example filters out all Network domain messages\\n env DEBUG=\"puppeteer:*\" env DEBUG_COLORS=true node script.js 2>&1 | grep -v \\'\"Network\\'\\n')])])]),n(\"h4\",{attrs:{id:\"爬虫实践\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#爬虫实践\"}},[t._v(\"#\")]),t._v(\" 爬虫实践\")]),t._v(\" \"),n(\"p\",[t._v(\"很多网页通过user-agent来判断设备，可以通过page.emulate(options)来进行模拟。options有两个配置项，一个为userAgent，另一个为viewport可以设置宽度(width)、高度(height)、屏幕缩放(deviceScaleFactor)、是否是移动端(isMobile)、有无touch事件(hasTouch)。\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" puppeteer \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'puppeteer'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" devices \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'puppeteer/DeviceDescriptors'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" iPhone \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" devices\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'iPhone 6'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\npuppeteer\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"launch\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"then\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"async\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"browser\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" page \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" browser\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"newPage\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"emulate\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"iPhone\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" page\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"goto\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'https://www.example.com'\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// other actions...\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" browser\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"close\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),n(\"p\",[t._v(\"上述代码则模拟了iPhone6访问某网站，其中devices是puppeteer内置的一些常见设备的模拟参数。\")]),t._v(\" \"),n(\"p\",[t._v(\"很多网页需要登录，有两种解决方案：\")]),t._v(\" \"),n(\"ol\",[n(\"li\",[t._v(\"让puppeteer去输入账号密码 常用方法：点击可以使用page.click(selector[, options])方法，也可以选择聚焦page.focus(selector)。 输入可以使用page.type(selector, text[, options])输入指定的字符串，还可以在options中设置delay缓慢输入更像真人一些。也可以使用keyboard.down(key[, options])来一个字符一个字符的输入。\")]),t._v(\" \"),n(\"li\",[t._v(\"如果是通过cookie判断登录状态的可以通过page.setCookie(...cookies)，想要维持cookie可以定时访问。\")])]),t._v(\" \"),n(\"h5\",{attrs:{id:\"tip：有些网站需要扫码，但是相同域名的其他网页却有登录，就可以尝试去可以登录的网页登录完利用cookie访问跳过扫码。\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#tip：有些网站需要扫码，但是相同域名的其他网页却有登录，就可以尝试去可以登录的网页登录完利用cookie访问跳过扫码。\"}},[t._v(\"#\")]),t._v(\" Tip：有些网站需要扫码，但是相同域名的其他网页却有登录，就可以尝试去可以登录的网页登录完利用cookie访问跳过扫码。\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"简单例子\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#简单例子\"}},[t._v(\"#\")]),t._v(\" 简单例子\")]),t._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"const puppeteer = require('puppeteer');\\n\\n(async () => {\\n  const browser = await puppeteer.launch({headless: false});\\n  const page = await browser.newPage();\\n  await page.goto('https://baidu.com');\\n  await page.type('#kw', 'puppeteer', {delay: 100});\\n  page.click('#su')\\n  await page.waitFor(1000);\\n  const targetLink = await page.evaluate(() => {\\n    return [...document.querySelectorAll('.result a')].filter(item => {\\n      return item.innerText && item.innerText.includes('Puppeteer的入门和实践')\\n    }).toString()\\n  });\\n  await page.goto(targetLink);\\n  await page.waitFor(1000);\\n  browser.close();\\n})()\\n\")])])]),n(\"p\",[n(\"img\",{attrs:{src:a(507),alt:\"records.gif\"}})]),t._v(\" \"),n(\"h2\",{attrs:{id:\"爬取电影天堂\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#爬取电影天堂\"}},[t._v(\"#\")]),t._v(\" 爬取电影天堂\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[t._v(\"\\n\")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}