## 各大直播推流表

- 湖南卫视:`rtmp://58.200.131.2:1935/livetv/hunantv`

- 我们以lol为例

- ```
  https://api.live.bilibili.com/room/v1/Room/getRoomInfoOld?mid=50329118
  ```

访问，得：

```json
{
	"code": 0,
	"message": "0",
	"ttl": 1,
	"data": {
		"roomStatus": 1,
		"roundStatus": 0,
		"liveStatus": 1,
		"url": "https://live.bilibili.com/7734200",
		"title": "【小组赛重播】8日16点小组赛第二轮",
		"cover": "http://i0.hdslb.com/bfs/vc/8c99dfa867da4329e7216fe734d66283c63787d3.png",
		"online": 424768,
		"roomid": 7734200,
		"broadcast_type": 0,
		"online_hidden": 0
	}
}
```

得到房间号7734200

**获取 url，拼接链接**

```
https://api.live.bilibili.com/room/v1/Room/playUrl?cid=7734200&qn=0&platform=web
```

访问，得

```json
{
    "code": 0,
    "message": "0",
    "ttl": 1,
    "data": {
        "current_quality": 4,
        "accept_quality": ["4", "3", "2"],
        "current_qn": 400,
        "quality_description": [{
            "qn": 10000,
            "desc": "原画"
        }, {
            "qn": 400,
            "desc": "蓝光"
        }, {
            "qn": 250,
            "desc": "超清"
        }, {
            "qn": 150,
            "desc": "高清"
        }, {
            "qn": 80,
            "desc": "流畅"
        }],
        "durl": [{
            "url": "https://d1--cn-gotcha04.bilivideo.com/live-bvc/359444/live_50329118_9516950_4000.flv?cdn=cn-gotcha04\u0026expires=1602139101\u0026len=0\u0026oi=1863228803\u0026pt=web\u0026qn=400\u0026trid=cf010c26e6ad4a72a3183b4f670beb61\u0026sigparams=cdn,expires,len,oi,pt,qn,trid\u0026sign=7214dd085b0ad2282c80ec7c3f03e0c1\u0026ptype=0\u0026src=13\u0026sl=10\u0026order=1",
            "length": 0,
            "order": 1,
            "stream_type": 0,
            "p2p_type": 8
        }, {
            "url": "https://d1--cn-gotcha04.bilivideo.com/live-bvc/612952/live_50329118_9516950_4000.flv?cdn=cn-gotcha04\u0026expires=1602139101\u0026len=0\u0026oi=1863228803\u0026pt=web\u0026qn=400\u0026trid=cf010c26e6ad4a72a3183b4f670beb61\u0026sigparams=cdn,expires,len,oi,pt,qn,trid\u0026sign=e351faceadf72c4a42c4f7a6ef33272d\u0026ptype=0\u0026src=13\u0026sl=10\u0026order=2",
            "length": 0,
            "order": 2,
            "stream_type": 0,
            "p2p_type": 8
        }, {
            "url": "https://d1--cn-gotcha03.bilivideo.com/live-bvc/904912/live_50329118_9516950_4000.flv?cdn=cn-gotcha03\u0026expires=1602139101\u0026len=0\u0026oi=1863228803\u0026pt=web\u0026qn=400\u0026trid=cf010c26e6ad4a72a3183b4f670beb61\u0026sigparams=cdn,expires,len,oi,pt,qn,trid\u0026sign=9f224a9287fe017a7609e00080cbc399\u0026ptype=0\u0026src=13\u0026sl=10\u0026order=3",
            "length": 0,
            "order": 3,
            "stream_type": 0,
            "p2p_type": 8
        }, {
            "url": "https://d1--cn-gotcha01.bilivideo.com/live-bvc/729281/live_50329118_9516950_4000.flv?cdn=cn-gotcha01\u0026expires=1602139101\u0026len=0\u0026oi=1863228803\u0026pt=web\u0026qn=400\u0026trid=cf010c26e6ad4a72a3183b4f670beb61\u0026sigparams=cdn,expires,len,oi,pt,qn,trid\u0026sign=0476976bd17b8c493aae6cdb06426f29\u0026ptype=0\u0026src=13\u0026sl=10\u0026order=4",
            "length": 0,
            "order": 4,
            "stream_type": 0,
            "p2p_type": 8
        }]
    }
}

```

我们选用durl[0]链接

```js
let url = 'https://d1--cn-gotcha04.bilivideo.com/live-bvc/359444/live_50329118_9516950_4000.flv?cdn=cn-gotcha04\u0026expires=1602139101\u0026len=0\u0026oi=1863228803\u0026pt=web\u0026qn=400\u0026trid=cf010c26e6ad4a72a3183b4f670beb61\u0026sigparams=cdn,expires,len,oi,pt,qn,trid\u0026sign=7214dd085b0ad2282c80ec7c3f03e0c1\u0026ptype=0\u0026src=13\u0026sl=10\u0026order=1'
```

```js
url.replace(/\u0026/g,'&')
```

得到

```html
https://d1--cn-gotcha04.bilivideo.com/live-bvc/264833/live_50329118_9516950_4000.flv?cdn=cn-gotcha04&expires=1602138638&len=0&oi=1863228803&pt=web&qn=400&trid=f35ee3ccd05948788d0aa8937f162e5b&sigparams=cdn,expires,len,oi,pt,qn,trid&sign=0c96be9b5be2269117012a21e668478a&ptype=0&src=13&sl=9&order=1
```

