{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{969:function(e,t,n){\"use strict\";n.r(t);var s=n(43),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[n(\"h3\",{attrs:{id:\"静态服务器定义\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#静态服务器定义\"}},[e._v(\"#\")]),e._v(\" 静态服务器定义\")]),e._v(\" \"),n(\"p\",[e._v(\"能够根据需要请求的文件，原封不动的将服务器磁盘中的数据直接返回给到浏览器。\")]),e._v(\" \"),n(\"ol\",[n(\"li\",[e._v(\"根据设定的目录，判断用户是否请求的文件时静态文件\")])]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"//解析路径\\nlet urlObj = path.parse(req.url)\\n//判断是否请求静态文件\\nurlObj.dir=='/static'\\n\")])])]),n(\"ol\",[n(\"li\",[e._v(\"从磁盘读取静态文件并返回\")])]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"//根据请求的后缀名，返回文件的类型\\nres.setHeader(\\\"content-type\\\",getContentType(urlObj.ext))\\n//从服务器磁盘中读取文件，并输出到响应对象中\\nlet rs = fs.createReadStream('./static/'+urlObj.base)\\nrs.pipe(res)\\n\")])])]),n(\"ol\",[n(\"li\",[e._v(\"如何 根据后缀名返回文件类型\")])]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v('function getContentType(extName){\\n    switch(extName){\\n        case \".jpg\":\\n            return \"image/jpeg\";\\n        case \".html\":\\n            return \"text/html;charset=utf-8\";\\n        case \".js\":\\n            return \"text/javascript;charset=utf-8\";\\n        case \".json\":\\n            return \"text/json;charset=utf-8\";\\n        case \".gif\":\\n            return \"image/gif\";\\n        case \".css\":\\n            return \"text/css\"\\n    }\\n}\\n')])])]),n(\"h4\",{attrs:{id:\"完整案例\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#完整案例\"}},[e._v(\"#\")]),e._v(\" 完整案例\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v('//引入http模块\\nlet http = require(\\'http\\');\\n//创建server对象\\nlet server = http.createServer()\\n//引入path模块\\nlet path = require(\\'path\\')\\n//引入文件模块\\nlet fs = require(\\'fs\\')\\n//监听客户端发送过来的请求\\n//req请求对象包含了请求的相关的信息\\n//res对象用于响应内容，可以通过这个对象帮助我们快速实现HTTP响应\\nserver.on(\\'request\\',function(req,res){\\n    //解析路径\\n    let urlObj = path.parse(req.url)\\n    //识别请求的路径\\n    //console.log(urlObj)\\n    //进入首页，返回首页的内容\\n    if(req.url==\"/\"){\\n        res.setHeader(\"content-type\",\"text/html;charset=utf-8\")\\n        res.end(`<link rel=\"stylesheet\" href=\"./static/style.css\"><h1>首页</h1><img src=\\'./static/cxk.jpg\\'>`)\\n    }else if(urlObj.dir==\\'/static\\'){\\n        res.setHeader(\"content-type\",getContentType(urlObj.ext))\\n        let rs = fs.createReadStream(\\'./static/\\'+urlObj.base)\\n        rs.pipe(res)\\n    }else{\\n        \\n        res.setHeader(\"content-type\",\"text/html;charset=utf-8\")\\n        res.end(\"<h1>404页面找不到</h1>\")\\n    }\\n    \\n})\\n\\n\\nfunction getContentType(extName){\\n    switch(extName){\\n        case \".jpg\":\\n            return \"image/jpeg\";\\n        case \".html\":\\n            return \"text/html;charset=utf-8\";\\n        case \".js\":\\n            return \"text/javascript;charset=utf-8\";\\n        case \".json\":\\n            return \"text/json;charset=utf-8\";\\n        case \".gif\":\\n            return \"image/gif\";\\n        case \".css\":\\n            return \"text/css\"\\n    }\\n}\\n\\n\\n\\n//启动服务器，监听服务端口\\nserver.listen(80,function(){\\n    console.log(\"服务已启动：http:127.0.0.1\")\\n})\\n')])])])])}),[],!1,null,null,null);t.default=r.exports}}]);","extractedComments":[]}